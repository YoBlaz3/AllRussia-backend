<style>
    .smart-captcha {
        margin-bottom: 20px;
    }
</style>

<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="entsys">Вход в систему</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <button id="translateButton2" class="btn btn-primary ms-auto">ar</button>
        </div>
    </nav>
    <div class="container d-flex align-items-center justify-content-center" style="min-height: 100vh;">
        <div class="card w-100" style="max-width: 400px;">
            <div class="card-body">
                <h3 id="enter" class="card-title text-center mb-4">Вход в систему</h3>
                <form method="post">
                    <div class="mb-3">
                        <label id="user" for="username" class="form-label">Имя пользователя</label>
                        <input type="text" class="form-control" id="username" name="username" required>
                        <div id="usernameHelp" class="form-text">Ваше имя пользователя останется конфиденциальным.</div>
                    </div>
                    <div class="mb-3">
                        <label id="password" for="password" class="form-label">Пароль</label>
                        <input type="password" class="form-control" id="password" name="password" required>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="rememberMe">
                        <label id="rememberme" class="form-check-label" for="rememberMe">Запомнить меня</label>
                    </div>
                    <div class="mb-3">
                        <button id="refresh" type="button" class="btn btn-link p-0" onclick="refreshCaptcha()">Обновить</button>
                        <img src="/captcha_image" id="captcha-image" alt="CAPTCHA" style="border: 1px solid #000;"><br>
                        <label id="imgtxt" for="captcha">Введите текст с изображения:</label><br>
                        <input type="text" name="captcha" id="captcha" class="form-control mt-2" required>
                    </div>

                    {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="alert alert-danger">
                            {% for category, message in messages %}
                                <div class="{{ category }}">{{ message }}</div>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% endwith %}

                    <button id="enterbtn" type="submit" class="btn btn-primary w-100">Войти</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const translations = {
            russian: {
                enter: "Вход в систему",
                user: "Имя пользователя",
                usernameHelp: "Ваше имя пользователя останется конфиденциальным.",
                password: "Пароль",
                rememberme: "Запомнить меня",
                enterbtn: "Войти",
                refresh: "Обновить",
                imgtxt: "Введите текст с изображения:",
            },
            arabic: {
                enter: "تسجيل الدخول إلى النظام",
                user: "اسم المستخدم",
                usernameHelp: "سيبقى اسم المستخدم الخاص بك سريا.",
                password: "كلمة المرور",
                rememberme: "تذكرني",
                enterbtn: "مدخل",
                refresh: "تحديث",
                imgtxt: "أدخل النص من الصورة:",
            }
        };

        let currentLanguage = 'russian';

        function translateText() {
            const lang = currentLanguage === 'russian' ? 'arabic' : 'russian';

            $('#user').text(translations[lang].user);
            $('#usernameHelp').text(translations[lang].usernameHelp);
            $('#password').text(translations[lang].password);
            $('#rememberme').text(translations[lang].rememberme);
            $('#enterbtn').text(translations[lang].enterbtn);
            $('#enter').text(translations[lang].enter);
            $('#refresh').text(translations[lang].refresh);
            $('#imgtxt').text(translations[lang].imgtxt);

            currentLanguage = lang;
        }

        $('#translateButton2').click(function() {
            translateText();
        });

        function refreshCaptcha() {
            document.getElementById('captcha-image').src = '/captcha_image?' + Date.now();
        }
    </script>
</body>
</html>
